<!--
Copyright 2025 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10x10 Grid Checkerboard</title>
    <style>
        /* 【關鍵修正】: 確保 body 填滿螢幕並設定備用背景色 */
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            /* 將背景設為黑色，即使 canvas 有縫隙也不會突兀 */
            background-color: black;
        }
        
        /* 【關鍵修正】: 使用 fixed 定位強制 canvas 填滿螢幕 */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: block;
        }

        /* 按鈕樣式保持不變 */
        #fullscreenButton, #backButton {
            position: fixed;
            top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            z-index: 1000; /* 確保在 canvas 之上 */
        }
        #backButton {
            left: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
        }
        #fullscreenButton {
            left: 180px;
            background-color: #007bff;
            color: white;
        }
        #backButton:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }
        #fullscreenButton:hover {
            background-color: #0056b3;
        }

        /* 全螢幕時的樣式 */
        :fullscreen, :-webkit-full-screen, :-moz-full-screen, :-ms-fullscreen {
            cursor: none;
        }
        :fullscreen #fullscreenButton, :fullscreen #backButton,
        :-webkit-full-screen #fullscreenButton, :-webkit-full-screen #backButton,
        :-moz-full-screen #fullscreenButton, :-moz-full-screen #backButton,
        :-ms-fullscreen #fullscreenButton, :-ms-fullscreen #backButton {
            display: none !important;
        }
    </style>
</head>
<body>
    <button id="backButton">← 返回主頁</button>
    <button id="fullscreenButton">點擊這裡進入全螢幕</button>
    <canvas id="checkerboardCanvas"></canvas>

    <script>
        const canvas = document.getElementById('checkerboardCanvas');
        const ctx = canvas.getContext('2d');

        function drawCheckerboard() {
            // 【關鍵修正】: 讓 Canvas 內部解析度匹配其 CSS 尺寸
            // canvas.clientWidth/Height 會讀取由 CSS (vw/vh) 設定的實際渲染尺寸
            canvas.width = canvas.clientWidth;
            canvas.height = canvas.clientHeight;

            const numCols = 10;
            const numRows = 10;
            
            const squareWidth = canvas.width / numCols;
            const squareHeight = canvas.height / numRows;

            for (let row = 0; row < numRows; row++) {
                for (let col = 0; col < numCols; col++) {
                    const color = (row + col) % 2 === 0 ? 'black' : 'white';
                    ctx.fillStyle = color;
                    ctx.fillRect(col * squareWidth, row * squareHeight, squareWidth, squareHeight);
                }
            }
        }

        // 全螢幕請求邏輯不變
        function requestFullscreen() {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            }
        }

        // 按鈕事件綁定不變
        const fullscreenButton = document.getElementById('fullscreenButton');
        const backButton = document.getElementById('backButton');
        fullscreenButton.addEventListener('click', requestFullscreen);
        backButton.addEventListener('click', () => { window.location.href = '../index.html'; });

        // 頁面載入、視窗縮放、進出全螢幕時都需要重繪
        window.addEventListener('resize', drawCheckerboard);
        document.addEventListener('fullscreenchange', () => setTimeout(drawCheckerboard, 50)); // 延遲一點以確保尺寸更新
        document.addEventListener('webkitfullscreenchange', () => setTimeout(drawCheckerboard, 50));

        // 初始繪製
        drawCheckerboard();
    </script>
</body>
</html>
