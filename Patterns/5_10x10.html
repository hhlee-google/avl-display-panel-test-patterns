<!--
Copyright 2025 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUTHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10x10 Grid Checkerboard</title>
    <style>
        /* 【修改部分】: html 和 body 佔滿整個螢幕 */
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background-color: #eee;
        }
        canvas {
            display: block;
            /* 【修改部分】: 讓 Canvas 尺寸由 CSS 控制，填滿父層 */
            width: 100%;
            height: 100%;
        }
        #fullscreenButton {
            position: fixed;
            top: 20px;
            left: 180px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            z-index: 1000;
            display: block;
        }
        #backButton {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 5px;
            z-index: 1000;
            transition: background-color 0.3s ease;
            display: block;
        }
        #backButton:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }
        :fullscreen {
            cursor: none;
        }
        :-webkit-full-screen {
            cursor: none;
        }
        :-moz-full-screen {
            cursor: none;
        }
        :-ms-fullscreen {
            cursor: none;
        }
        :fullscreen #fullscreenButton,
        :fullscreen #backButton {
            display: none !important;
        }
        :-webkit-full-screen #fullscreenButton, :-webkit-full-screen #backButton { display: none !important; }
        :-moz-full-screen #fullscreenButton, :-moz-full-screen #backButton { display: none !important; }
        :-ms-fullscreen #fullscreenButton, :-ms-fullscreen #backButton { display: none !important; }
    </style>
</head>
<body>
    <button id="backButton">← 返回主頁</button>
    <button id="fullscreenButton">點擊這裡進入全螢幕</button>
    <canvas id="checkerboardCanvas"></canvas>

    <script>
        const canvas = document.getElementById('checkerboardCanvas');
        const ctx = canvas.getContext('2d');

        function drawCheckerboard() {
            // 【修改部分】: 關鍵修正！
            // 讓 Canvas 的內部解析度（像素數量）與其在螢幕上的顯示尺寸（CSS尺寸）保持一致
            // 這能確保圖案清晰，並正確填滿由 CSS 設定的 100% 空間
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;

            const numCols = 10;
            const numRows = 10;
            
            // 根據 Canvas 的實際繪圖尺寸計算方格大小
            const squareWidth = canvas.width / numCols;
            const squareHeight = canvas.height / numRows;

            for (let row = 0; row < numRows; row++) {
                for (let col = 0; col < numCols; col++) {
                    const color = (row + col) % 2 === 0 ? 'black' : 'white';
                    ctx.fillStyle = color;
                    ctx.fillRect(col * squareWidth, row * squareHeight, squareWidth, squareHeight);
                }
            }
        }

        function requestFullscreen() {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) { /* Firefox */
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { /* IE/Edge */
                document.documentElement.msRequestFullscreen();
            }
        }

        const fullscreenButton = document.getElementById('fullscreenButton');
        const backButton = document.getElementById('backButton');

        if (fullscreenButton) {
            fullscreenButton.addEventListener('click', requestFullscreen);
        }
        if (backButton) {
            backButton.addEventListener('click', () => {
                window.location.href = '../index.html';
            });
        }

        drawCheckerboard();
        window.addEventListener('resize', drawCheckerboard);

        function handleFullscreenChange() {
             const isFullscreen = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;
            if (isFullscreen) {
                if (fullscreenButton) fullscreenButton.style.display = 'none';
                if (backButton) backButton.style.display = 'none';
            } else {
                if (fullscreenButton) fullscreenButton.style.display = 'block';
                if (backButton) backButton.style.display = 'block';
            }
            // 【修改部分】: 稍微延遲重繪，給瀏覽器時間更新尺寸
            setTimeout(drawCheckerboard, 100);
        }

        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);
    </script>
</body>
</html>
